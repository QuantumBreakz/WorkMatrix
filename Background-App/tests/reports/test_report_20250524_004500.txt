test_check_idle_state (test_activity_collector.TestActivityCollector.test_check_idle_state)
Test idle state detection. ... ok
test_cleanup_old_activity (test_activity_collector.TestActivityCollector.test_cleanup_old_activity)
Test cleanup of old activity logs. ... ok
test_collect_activity (test_activity_collector.TestActivityCollector.test_collect_activity)
Test activity collection. ... ok
test_get_active_window_info (test_activity_collector.TestActivityCollector.test_get_active_window_info)
Test getting active window information. ... ok
test_get_activity_summary (test_activity_collector.TestActivityCollector.test_get_activity_summary)
Test activity summary generation. ... ok
test_collect_app_usage (test_app_usage_collector.TestAppUsageCollector.test_collect_app_usage)
Test collecting app usage data. ... ERROR
test_error_handling (test_app_usage_collector.TestAppUsageCollector.test_error_handling)
Test error handling in app usage collection. ... ok
test_flush (test_app_usage_collector.TestAppUsageCollector.test_flush)
Test flushing remaining app usage data. ... ok
test_get_active_window_linux (test_app_usage_collector.TestAppUsageCollector.test_get_active_window_linux)
Test getting active window on Linux. ... ok
test_get_active_window_macos (test_app_usage_collector.TestAppUsageCollector.test_get_active_window_macos)
Test getting active window on macOS. ... FAIL
test_get_active_window_windows (test_app_usage_collector.TestAppUsageCollector.test_get_active_window_windows)
Test getting active window on Windows. ... ok
test_capture_recording (test_recording_collector.TestRecordingCollector.test_capture_recording)
Test screen recording capture. ... FAIL
test_error_handling (test_recording_collector.TestRecordingCollector.test_error_handling)
Test error handling in recording operations. ... FAIL
test_is_terminal_active (test_recording_collector.TestRecordingCollector.test_is_terminal_active)
Test terminal activity detection. ... FAIL
test_recording_cleanup (test_recording_collector.TestRecordingCollector.test_recording_cleanup)
Test cleanup of old recordings. ... FAIL
test_terminal_blocking (test_recording_collector.TestRecordingCollector.test_terminal_blocking)
Test that recording is blocked when terminal is active. ... ok
test_capture_screenshot (test_screenshot_collector.TestScreenshotCollector.test_capture_screenshot) ... FAIL
test_cleanup_old_screenshots (test_screenshot_collector.TestScreenshotCollector.test_cleanup_old_screenshots) ... FAIL
test_error_handling (test_screenshot_collector.TestScreenshotCollector.test_error_handling) ... FAIL
test_get_recent_screenshots (test_screenshot_collector.TestScreenshotCollector.test_get_recent_screenshots) ... ERROR

======================================================================
ERROR: test_collect_app_usage (test_app_usage_collector.TestAppUsageCollector.test_collect_app_usage)
Test collecting app usage data.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1387, in patched
    with self.decoration_helper(patched,
  File "C:\Python312\Lib\contextlib.py", line 137, in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1369, in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\contextlib.py", line 526, in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1458, in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1431, in get_original
    raise AttributeError(
AttributeError: <class 'src.collectors.app_usage_collector.AppUsageCollector'> does not have the attribute 'db'

======================================================================
ERROR: test_get_recent_screenshots (test_screenshot_collector.TestScreenshotCollector.test_get_recent_screenshots)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 136, in test_get_recent_screenshots
    self.assertTrue(all(os.path.exists(f) for f in recent))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 136, in <genexpr>
    self.assertTrue(all(os.path.exists(f) for f in recent))
                        ^^^^^^^^^^^^^^^^^
TypeError: _path_exists: path should be string, bytes, os.PathLike or integer, not dict

======================================================================
FAIL: test_get_active_window_macos (test_app_usage_collector.TestAppUsageCollector.test_get_active_window_macos)
Test getting active window on macOS.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_app_usage_collector.py", line 77, in test_get_active_window_macos
    self.assertEqual(window_info["window_title"], "Test Window")
AssertionError: 'unknown' != 'Test Window'
- unknown
+ Test Window


======================================================================
FAIL: test_capture_recording (test_recording_collector.TestRecordingCollector.test_capture_recording)
Test screen recording capture.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 60, in test_capture_recording
    self.assertIsNotNone(result)
AssertionError: unexpectedly None

======================================================================
FAIL: test_error_handling (test_recording_collector.TestRecordingCollector.test_error_handling)
Test error handling in recording operations.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 78, in test_error_handling
    with self.assertRaises(Exception) as context:
AssertionError: Exception not raised

======================================================================
FAIL: test_is_terminal_active (test_recording_collector.TestRecordingCollector.test_is_terminal_active)
Test terminal activity detection.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 34, in test_is_terminal_active
    self.assertFalse(is_terminal_active())
AssertionError: True is not false

======================================================================
FAIL: test_recording_cleanup (test_recording_collector.TestRecordingCollector.test_recording_cleanup)
Test cleanup of old recordings.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 101, in test_recording_cleanup
    mock_cleanup.assert_called_once_with("recordings", self.test_dir, 7)
  File "C:\Python312\Lib\unittest\mock.py", line 955, in assert_called_once_with
    raise AssertionError(msg)
AssertionError: Expected 'delete_old_media' to be called once. Called 0 times.

======================================================================
FAIL: test_capture_screenshot (test_screenshot_collector.TestScreenshotCollector.test_capture_screenshot)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 73, in test_capture_screenshot
    mock_file.assert_called_once()
  File "C:\Python312\Lib\unittest\mock.py", line 923, in assert_called_once
    raise AssertionError(msg)
AssertionError: Expected 'open' to have been called once. Called 0 times.

======================================================================
FAIL: test_cleanup_old_screenshots (test_screenshot_collector.TestScreenshotCollector.test_cleanup_old_screenshots)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 103, in test_cleanup_old_screenshots
    mock_cleanup.assert_called_once_with("screenshots", self.test_dir, 7)
  File "C:\Python312\Lib\unittest\mock.py", line 955, in assert_called_once_with
    raise AssertionError(msg)
AssertionError: Expected 'delete_old_media' to be called once. Called 0 times.

======================================================================
FAIL: test_error_handling (test_screenshot_collector.TestScreenshotCollector.test_error_handling)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 115, in test_error_handling
    with self.assertRaises(Exception) as context:
AssertionError: Exception not raised

----------------------------------------------------------------------
Ran 20 tests in 5.088s

FAILED (failures=8, errors=2)

==================================================
Test Summary
==================================================
Total Tests: 20
Failures: 8
Errors: 2
Skipped: 0

Failures:

test_get_active_window_macos (test_app_usage_collector.TestAppUsageCollector.test_get_active_window_macos)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_app_usage_collector.py", line 77, in test_get_active_window_macos
    self.assertEqual(window_info["window_title"], "Test Window")
AssertionError: 'unknown' != 'Test Window'
- unknown
+ Test Window



test_capture_recording (test_recording_collector.TestRecordingCollector.test_capture_recording)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 60, in test_capture_recording
    self.assertIsNotNone(result)
AssertionError: unexpectedly None


test_error_handling (test_recording_collector.TestRecordingCollector.test_error_handling)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 78, in test_error_handling
    with self.assertRaises(Exception) as context:
AssertionError: Exception not raised


test_is_terminal_active (test_recording_collector.TestRecordingCollector.test_is_terminal_active)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 34, in test_is_terminal_active
    self.assertFalse(is_terminal_active())
AssertionError: True is not false


test_recording_cleanup (test_recording_collector.TestRecordingCollector.test_recording_cleanup)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_recording_collector.py", line 101, in test_recording_cleanup
    mock_cleanup.assert_called_once_with("recordings", self.test_dir, 7)
  File "C:\Python312\Lib\unittest\mock.py", line 955, in assert_called_once_with
    raise AssertionError(msg)
AssertionError: Expected 'delete_old_media' to be called once. Called 0 times.


test_capture_screenshot (test_screenshot_collector.TestScreenshotCollector.test_capture_screenshot)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 73, in test_capture_screenshot
    mock_file.assert_called_once()
  File "C:\Python312\Lib\unittest\mock.py", line 923, in assert_called_once
    raise AssertionError(msg)
AssertionError: Expected 'open' to have been called once. Called 0 times.


test_cleanup_old_screenshots (test_screenshot_collector.TestScreenshotCollector.test_cleanup_old_screenshots)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 103, in test_cleanup_old_screenshots
    mock_cleanup.assert_called_once_with("screenshots", self.test_dir, 7)
  File "C:\Python312\Lib\unittest\mock.py", line 955, in assert_called_once_with
    raise AssertionError(msg)
AssertionError: Expected 'delete_old_media' to be called once. Called 0 times.


test_error_handling (test_screenshot_collector.TestScreenshotCollector.test_error_handling)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 115, in test_error_handling
    with self.assertRaises(Exception) as context:
AssertionError: Exception not raised


Errors:

test_collect_app_usage (test_app_usage_collector.TestAppUsageCollector.test_collect_app_usage)
Traceback (most recent call last):
  File "C:\Python312\Lib\unittest\mock.py", line 1387, in patched
    with self.decoration_helper(patched,
  File "C:\Python312\Lib\contextlib.py", line 137, in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1369, in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\contextlib.py", line 526, in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1458, in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1431, in get_original
    raise AttributeError(
AttributeError: <class 'src.collectors.app_usage_collector.AppUsageCollector'> does not have the attribute 'db'


test_get_recent_screenshots (test_screenshot_collector.TestScreenshotCollector.test_get_recent_screenshots)
Traceback (most recent call last):
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 136, in test_get_recent_screenshots
    self.assertTrue(all(os.path.exists(f) for f in recent))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Surveillance-Application\surveillance-Application-main\Background-App\tests\collectors\test_screenshot_collector.py", line 136, in <genexpr>
    self.assertTrue(all(os.path.exists(f) for f in recent))
                        ^^^^^^^^^^^^^^^^^
TypeError: _path_exists: path should be string, bytes, os.PathLike or integer, not dict

